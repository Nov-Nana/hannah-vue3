import{ae as o,af as u,ag as r,U as l}from"./index-d769c587.js";import{l as g,m as c}from"./music-d17f1969.js";import{a as S,b as p,g as y}from"./music-f1a5f29a.js";const{GO_MUSIC_PROJECT:a}=l,d=o(a),L=u({id:"usemusicStore",state:()=>d||{currentSong:{},playList:[],isPlayState:!1,search:{keyword:"",page:1,type:1},searchList:[],searchPageCount:0,banner:[]},getters:{getCurrentSong(){return this.currentSong},getPlayList(){return this.playList},getIsPlayState(){return this.isPlayState},getSearch(){return this.search},getSearchList(){return this.searchList},getSearchPageCount(){return this.searchPageCount},getBanner(){return this.banner}},actions:{addPlayList(t){var e;(e=this.playList)==null||e.push(t),r(a,this.$state)},deletePlayList(t){var e,s;this.playList=(e=this.playList)==null?void 0:e.filter(n=>n.id!==t),((s=this.currentSong)==null?void 0:s.id)===t&&(this.isPlayState=!1,this.currentSong=void 0),r(a,this.$state)},clearPlayList(){this.playList=[],this.currentSong=void 0,r(a,this.$state)},updateCurrentSong(t){this.currentSong=t,r(a,this.$state)},changeIsPlayState(t){this.isPlayState=t,r(a,this.$state)},doSearch(t){this.search=t;let e=(t.page-1)*100;g(t.keyword,100,e,t.type).then(s=>{this.searchPageCount=Math.floor(s.result.songCount/100)+1;let n=[];s.result.songs.forEach((i,h)=>n.push({idx:S(h+1),key:i.id,songTitle:i.name,singer:p(i.artists),album:i.album.name,albumId:i.album.id,duration:y(i.duration)})),this.searchList=n,r(a,this.$state)})},updateBanner(){c().then(t=>{let e=[];t.banners.forEach(s=>e.push({imageUrl:s.imageUrl,typeTitle:s.typeTitle,titleColor:s.titleColor,targetId:s.targetId})),this.banner=e,r(a,this.$state)})}}});export{L as u};
