import{u as b}from"./musicStore-8e60b60e.js";import{i as S,j as x,k as v}from"./music-d17f1969.js";import{p as C}from"./music-f1a5f29a.js";import{d as h,q as P,a9 as w,b as i,o as y,l as U,w as u,f as l,u as d,c as L}from"./index-d769c587.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";const z=h({__name:"index",setup(f){const e=b(),g=P([{title:"",key:"idx",width:50},{title:"音乐标题",key:"songTitle"},{title:"歌手",key:"singer",width:200},{title:"专辑",key:"album",width:200},{title:"时长",key:"duration",minWidth:100}]);w(()=>{});function m(t){var s,c;const r=(s=e.getSearch)==null?void 0:s.keyword,o=(c=e.getSearch)==null?void 0:c.type;let a={keyword:r,type:o,page:t};e.doSearch(a)}const k=t=>({style:"cursor: pointer;",ondblclick:async()=>{let r=!1;const o=e.getPlayList;if(o==null||o.forEach(a=>{a.id===t.key&&(e.updateCurrentSong(a),r=!0)}),!r){let a="",s=[],c=0,_="";await S(t.key).then(n=>{a=n.data[0].url,c=n.data[0].time}),await x(t.key).then(n=>{s=C(n==null?void 0:n.lrc.lyric)}),await v(t.key).then(n=>{_=n.songs[0].al.picUrl});let p={id:t.key,url:a,time:c,lyric:s,albumPic:_,name:t.songTitle,artists:t.singer,album:t.album};e.updateCurrentSong(p),e.addPlayList(p)}}});return(t,r)=>{const o=i("n-data-table"),a=i("n-pagination"),s=i("n-space"),c=i("n-tab-pane"),_=i("n-tabs");return y(),U(_,{type:"line",animated:"",size:"small"},{default:u(()=>[l(c,{name:"songs",tab:"单曲"},{default:u(()=>[l(s,{vertical:""},{default:u(()=>{var p;return[l(o,{size:"small",striped:"",bordered:!1,columns:g.value,data:d(e).getSearchList,"row-props":k},null,8,["columns","data"]),l(a,{"onUpdate:page":m,page:(p=d(e).getSearch)==null?void 0:p.page,"page-count":d(e).getSearchPageCount},null,8,["page","page-count"])]}),_:1})]),_:1})]),_:1})}}}),A={class:"go-search-page"},E=h({__name:"musicSearch",setup(f){return(e,g)=>{const m=i("n-scrollbar");return y(),L("div",A,[l(m,{style:{"max-height":"100%"}},{default:u(()=>[l(d(z))]),_:1})])}}});const M=B(E,[["__scopeId","data-v-53222031"]]);export{M as default};
